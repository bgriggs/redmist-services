--CREATE EXTENSION IF NOT EXISTS timescaledb CASCADE;

--CREATE TABLE channel_data (
--  timestamp   TIMESTAMP        NOT NULL,
--  app_id      UUID             NOT NULL,
--  channel_id  INT    		   NOT NULL,
--  value       REAL  		   NOT NULL
--);

--SELECT create_hypertable('ChannelData', 'Timestamp');

--CREATE INDEX ON channel_data (DeviceAppId, ChannelId, Timestamp DESC);


 migrationBuilder.CreateTable(
                name: "channel_status",
                schema: "public",
                columns: table => new
                {
                    timestamp = table.Column<DateTime>(nullable: false),
                    app_id = table.Column<Guid>(nullable: false),
                    channel_id = table.Column<int>(nullable: false),
                    value = table.Column<float>(nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_channel_status", x => new { x.timestamp, x.app_id, x.channel_id });
                });

            migrationBuilder.Sql("SELECT create_hypertable('channel_logs', 'timestamp')");